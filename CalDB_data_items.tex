
\subsection{Static and external calibration database data items}\label{ssec:caldb_items_structures}
Static calibrations are data which are updated very rarely only and stay static the most of the time or arise from external sources. The first data are created by specific calibration recipes invoked only once in a while (e.g. the detector linearity and gain determination section~\ref{sssec:metis_det_lingain}). External data either created individually for each frame by \ac{ESO} as in case of the \hyperref[dataitem:persistence_map]{\PROD{PERSISTENCE_MAP}}, or taken from external databases (e.g. \ac{HITRAN} in case of the \hyperref[dataitem:atm_line_cat]{\EXTCALIB{ATM_LINE_CAT}}).

\subsubsection{General calibration database item structures}\label{sssec:generalcaldbdatastructs}
This section describes items of the static calibration database, which are used in all/more than one, the \ac{IMG} and the \ac{LSS} pipelines. This concerns mainly the detector calibration files.

\paragraph{\hyperref[dataitem:persistence_map]{\PROD{PERSISTENCE_MAP}}}\label{dataitem:persistence_map}

\paragraph{\hyperref[dataitem:gain_map_det]{\PROD{GAIN_MAP_det}}}\label{dataitem:gain_map_det}\label{dataitem:gainmap}

\paragraph{\hyperref[dataitem:gain_map_lm]{\PROD{GAIN_MAP_LM}}}\label{dataitem:gain_map_lm}
See \hyperref[dataitem:gain_map_det]{\PROD{GAIN_MAP_det}}.

\paragraph{\hyperref[dataitem:gain_map_n]{\PROD{GAIN_MAP_N}}}\label{dataitem:gain_map_n}
See \hyperref[dataitem:gain_map_det]{\PROD{GAIN_MAP_det}}.

%\clearpage
\subsubsection{IFU calibration database item structures}\label{sssec:lmscaldbdatastructs}
%\clearpage


\subsubsection{IMG calibration database item structures}\label{sssec:imgcaldbdatastructs}
%\clearpage

\subsubsection{LSS calibration database item structures}\label{sssec:lsscaldbdatastructs}
\textbf{External static calibration data}
% ##################################################################################### 
\paragraph{\hyperref[dataitem:atm_line_cat]{\EXTCALIB{ATM_LINE_CAT}}}\label{dataitem:atm_line_cat}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:atm_line_cat]{\PROD{ATM_LINE_CAT}}\\[0.3cm]
Description: & Line list of atmospheric emission and absorption lines\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{ATM_LINE_CAT}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{ATM_LINE_CAT}\\[0.3cm]
Source: & \ac{HITRAN} database (\url{https://hitran.org/})\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & wavelength calibration\\
        & sky emission removal\\
        & telluric correction\\
%Data item structure: & see \ref{drsstructure:lmrsrfraw}\\
\end{recipedef}
%\paragraph{\hyperref[dataitem:lm_rsrf_raw]{\PROD{LM_RSRF_RAW}}}\label{drsstructure:LM_RSRF_RAW}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:ao_psf_model]{\EXTCALIB{AO_PSF_MODEL}}}\label{dataitem:ao_psf_model}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:ao_psf_model]{\PROD{AO_PSF_MODEL}}\\[0.3cm]
Description: & Model of the \ac{AO} induced \ac{PSF}\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{AO_PSF_MODEL}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{AO_PSF_MODEL}\\[0.3cm]
Source: & \ac{PSF} modelling \\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & flux calibration\\
%Data item structure: & see \ref{drsstructure:lmrsrfraw}\\
\end{recipedef}
%\paragraph{\hyperref[dataitem:lm_rsrf_raw]{\PROD{LM_RSRF_RAW}}}\label{drsstructure:LM_RSRF_RAW}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{hdrl\_imagelist * image: Three image layers (data, error, mask)}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:atm_profile]{\EXTCALIB{ATM_PROFILE}}}\label{dataitem:atm_profile}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:atm_profile]{\PROD{ATM_PROFILE}}\\[0.3cm]
Description: & atmospheric profile containing height information on temperature, pressure and molecular abundances\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{ATM_PROFILE}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{ATM_PROFILE}\\[0.3cm]
Source: & Taken from \url{https://eodg.atm.ox.ac.uk/RFM/atm/}\\
Comment: & Currently the \texttt{equ.atm} is standard. Refinement with data from L-HATPRO radiometer desired.\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & telluric correction\\
%Data item structure: & see \ref{drsstructure:lmrsrfraw}\\
\end{recipedef}
%\paragraph{\hyperref[dataitem:lm_rsrf_raw]{\PROD{LM_RSRF_RAW}}}\label{drsstructure:LM_RSRF_RAW}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\textbf{Static calibration data}
\paragraph{\hyperref[dataitem:laser_tab]{\STATCALIB{LASER_TAB}}}\label{dataitem:laser_tab}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:laser_tab]{\PROD{LASER_TAB}}\\[0.3cm]
Description: & Line list of the \ac{WCU} laser sources\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{LASER_TAB}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{LASER_TAB}\\[0.3cm]
Source: & Lab measurements during \ac{AIT} phase\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & wavelength calibration\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:tss_model_cat]{\STATCALIB{TSS_MODEL_CAT}}}\label{dataitem:tss_model_cat}
TBWritten
% ##################################################################################### 
\paragraph{\hyperref[dataitem:tss_cont_tab]{\STATCALIB{TSS_CONT_TAB}}}\label{dataitem:tss_cont_tab}
TBWritten


% ##################################################################################### 
\paragraph{\hyperref[dataitem:ref_flux_cat]{\STATCALIB{REF_FLUX_CAT}}}\label{dataitem:ref_flux_cat}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:ref_flux_cat]{\PROD{REF_FLUX_CAT}}\\[0.3cm]
Description: & Catalogue of flux standard stars (reference spectra)\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{REF_FLUX_CAT}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{REF_FLUX_CAT}\\[0.3cm]
Source: & most probably same as \ac{CRIRES} and \ac{VISIR}; see also \cite{METIS-calibration_plan} \\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & flux calibration\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:lm_adc_slitloss]{\STATCALIB{LM_ADC_SLITLOSS}}}\label{dataitem:lm_adc_slitloss}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:lm_adc_slitloss]{\PROD{LM_ADC_SLITLOSS}}\\[0.3cm]
Description: & Table of the LM-band slitlosses as function of the object position across the slit\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{LM_ADC_SLITLOSS}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{LM_ADC_SLITLOSS}\\[0.3cm]
Source: & recipe \hyperref[rec:metislmadcmslitloss]{\REC{metis_lm_adc_slitloss}} (see Section~\ref{sssec:adc_slitlosses} and \cite{METIS-calibration_plan}) \\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & flux calibration\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:n_adc_slitloss]{\STATCALIB{N_ADC_SLITLOSS}}}\label{dataitem:n_adc_slitloss}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:n_adc_slitloss]{\PROD{N_ADC_SLITLOSS}}\\[0.3cm]
Description: & Table of the N-band slitlosses as function of the object position across the slit\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{N_ADC_SLITLOSS}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{N_ADC_SLITLOSS}\\[0.3cm]
Source: & recipe \hyperref[rec:metisnadcmslitloss]{\REC{metis_n_adc_slitloss}} (see Section~\ref{sssec:adc_slitlosses} and \cite{METIS-calibration_plan}) \\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & flux calibration\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:lsf_kernel]{\STATCALIB{LSF_KERNEL}}}\label{dataitem:lsf_kernel}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:lsf_kernel]{\PROD{LSF_KERNEL}}\\[0.3cm]
Description: & Wavelength dependent model of the \ac{LSF}\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{LSF_KERNEL}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{LSF_KERNEL}\\[0.3cm]
Source: & Determined during \ac{AIT} phase and commissioning\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & telluric correction\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:n_lss_dist_sol]{\STATCALIB{N_LSS_DIST_SOL}}}\label{dataitem:n_lss_dist_sol}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:n_lss_dist_sol]{\PROD{N_LSS_DIST_SOL}}\\[0.3cm]
Description: & N-band geometrical distortion solution\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{N_LSS_DIST_SOL}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{N_LSS_DIST_SOL}\\[0.3cm]
Source: & Determined during \ac{AIT} phase with N-band laser sources\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & wavelength calibration / rectification\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:n_lss_wave_guess]{\STATCALIB{N_LSS_WAVE_GUESS}}}\label{dataitem:n_lss_wave_guess}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:n_lss_wave_guess]{\PROD{N_LSS_WAVE_GUESS}}\\[0.3cm]
Description: & First guess of the N-band wavelength solution\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{N_LSS_WAVE_GUESS}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{N_LSS_WAVE_GUESS}\\[0.3cm]
Source: & During \ac{AIT} phase N-band laser sources will be available to create the first guess of the wavelength solution\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & wavelength calibration\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{cpl\_table * table: Tables}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:lm_synth_trans]{\STATCALIB{LM_SYNTH_TRANS}}}\label{dataitem:lm_synth_trans}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:lm_synth_trans]{\PROD{LM_SYNTH_TRANS}}\\[0.3cm]
Description: & Synthetic transmission curve to be used for telluric correction of flux standard stars\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{LM_SYNTH_TRANS}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{LM_SYNTH_TRANS}\\[0.3cm]
Source: & Calculated by \texttt{molecfit} with averaged parameters\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & telluric correction of flux standard stars\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{hdrl\_spectrum1D * spectrum: Spectrum}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}

% ##################################################################################### 
\paragraph{\hyperref[dataitem:n_synth_trans]{\STATCALIB{N_SYNTH_TRANS}}}\label{dataitem:n_synth_trans}
\begin{recipedef}
\textbf{\ac{FITS} file structure:}\\
Name: & \hyperref[dataitem:n_synth_trans]{\PROD{N_SYNTH_TRANS}}\\[0.3cm]
Description: & Synthetic transmission curve to be used for telluric correction of flux standard stars\\[0.3cm]
\hyperref[fits:pro.catg]{\FITS{PRO.CATG}}: & \FITS{N_SYNTH_TRANS}\\
OCA keywords: & \hyperref[fits:pro.catg]{\FITS{PRO.CATG}}\\
\FITS{DO.CATG}: & \FITS{N_SYNTH_TRANS}\\[0.3cm]
Source: & Calculated by \texttt{molecfit} with averaged parameters\\
Processing \ac{FITS} Keywords: & provided at \ac{PAE}\\
Purpose: & telluric correction of flux standard stars\\
\end{recipedef}
\begin{datastructdef}
\textbf{Corresponding \ac{CPL} structure:}
\begin{enumerate}
    \item \texttt{cpl\_propertylist * keywords: Primary keywords (\hyperref[fits:pro.catg]{\FITS{PRO.CATG}})}
    \item \texttt{hdrl\_spectrum1D * spectrum: Spectrum}
    \item \texttt{cpl\_propertylist * plistarray[]: Extension keywords}
\end{enumerate}
\end{datastructdef}
%\paragraph{\hyperref[dataitem:]{\PROD{}}}\label{dataitem:}
%\paragraph{\hyperref[dataitem:]{\PROD{}}}\label{dataitem:}
%\paragraph{\hyperref[dataitem:]{\PROD{}}}\label{dataitem:}


